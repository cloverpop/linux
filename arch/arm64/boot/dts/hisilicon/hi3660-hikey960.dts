/*
 * dts file for Hisilicon HiKey960 Development Board
 *
 * Copyright (C) 2016, Hisilicon Ltd.
 *
 */

/dts-v1/;

#include "hi3660.dtsi"
#include "hikey960-pinctrl.dtsi"
#include "hi3660-gpu.dtsi"
#include <dt-bindings/gpio/gpio.h>
#include <dt-bindings/input/input.h>
#include <dt-bindings/interrupt-controller/irq.h>

/ {
	model = "HiKey960";
	compatible = "hisilicon,hi3660-hikey960", "hisilicon,hi3660";

	aliases {
		mshc1 = &dwmmc1;
		mshc2 = &dwmmc2;
		serial0 = &uart0;
		serial1 = &uart1;
		serial2 = &uart2;
		serial3 = &uart3;
		serial4 = &uart4;
		serial5 = &uart5;
		serial6 = &uart6;
	};

	chosen {
		stdout-path = "serial6:115200n8";
	};

	memory@0 {
		device_type = "memory";
		/* rewrite this at bootloader */
		reg = <0x0 0x0 0x0 0x0>;
	};

	soc {
		keys: gpio-keys {
			compatible = "gpio-keys";
			pinctrl-names = "default";
			pinctrl-0 = <&pwr_key_pmx_func &pwr_key_cfg_func>;

			power {
				wakeup-source;
				gpios = <&gpio4 2 GPIO_ACTIVE_LOW>;
				label = "GPIO Power";
				linux,code = <KEY_POWER>;
			};
		};

		leds {
			compatible = "gpio-leds";
			status = "okay";

			user_led1 {
				label = "user_led1";
				/* gpio_150_user_led1 */
				gpios = <&gpio18 6 0>;
				linux,default-trigger = "heartbeat";
			};

			user_led2 {
				label = "user_led2";
				/* gpio_151_user_led2 */
				gpios = <&gpio18 7 0>;
				linux,default-trigger = "mmc0";
			};

			user_led3 {
				label = "user_led3";
				/* gpio_189_user_led3 */
				gpios = <&gpio23 5 0>;
				default-state = "off";
			};

			user_led4 {
				label = "user_led4";
				/* gpio_190_user_led4 */
				gpios = <&gpio23 6 0>;
				linux,default-trigger = "cpu0";
			};

			wlan_active_led {
				label = "wifi_active";
				/* gpio_205_wifi_active */
				gpios = <&gpio25 5 0>;
				linux,default-trigger = "phy0tx";
				default-state = "off";
			};

			bt_active_led {
				label = "bt_active";
				gpios = <&gpio25 7 0>;
				/* gpio_207_user_led1 */
				linux,default-trigger = "hci0-power";
				default-state = "off";
			};
		};

		wlan_en_reg: fixedregulator@1 {
			compatible = "regulator-fixed";
			regulator-name = "wlan-en-regulator";
			regulator-min-microvolt = <1800000>;
			regulator-max-microvolt = <1800000>;

			/* WLAN_EN GPIO for this board - GPIO_051_WIFI_EN */
			gpio = <&gpio6 3 0>;

			/* WLAN card specific delay */
			startup-delay-us = <70000>;
			enable-active-high;
		};
	};
};

&i2c0 {
	status = "okay";
};

&i2c1 {
	status = "okay";

	adv7533: adv7533@39 {
		status = "ok";
		compatible = "adi,adv7533";
		reg = <0x39>;
	};
};

&i2c7 {
	status = "okay";
};

&uart3 {
	status = "okay";
};

&uart4 {
	status = "okay";

	bluetooth {
		compatible = "ti,wl1837-st";
		enable-gpios = <&gpio15 6 GPIO_ACTIVE_HIGH>;
		max-speed = <921600>;
	};
};

&uart6 {
	status = "okay";
};

&spi2 {
//	status = "okay";

/*	spidev@0 {
		compatible = "linux,spidev";
		spi-max-frequency = <500000>;
		reg = <0>;
		status = "okay";
	};
 */
};

&spi3 {
	status = "okay";
};

&ufs {
	reset-gpio = <&gpio18 1 0>;
};

&dwmmc2 { /* WIFI */
	broken-cd;
	/* WL_EN */
	vmmc-supply = <&wlan_en_reg>;
	ti,non-removable;
	non-removable;
	#address-cells = <0x1>;
	#size-cells = <0x0>;
	status = "ok";

	wlcore: wlcore@2 {
		compatible = "ti,wl1837";
		reg = <2>;      /* sdio func num */
		/* WL_IRQ, GPIO_179_WL_WAKEUP_AP */
		interrupt-parent = <&gpio22>;
		interrupts = <3 IRQ_TYPE_EDGE_RISING>;
	};
};
